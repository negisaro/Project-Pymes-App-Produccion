<section class="auth-bg">
  <form [formGroup]="form" (ngSubmit)="submit()" class="auth-form" *ngIf="!sent">
    <h2 class="auth-title">Recuperar acceso</h2>
    <p class="auth-subtitle">Ingresa tu correo electrónico y te enviaremos instrucciones para restablecer tu contraseña.</p>
    <div class="auth-fields">
      <div>
        <label for="email">Correo electrónico</label>
        <input id="email" type="email" formControlName="email" autocomplete="username" class="input input-bordered rounded-xl" />
        <div *ngIf="form.get('email')?.invalid && form.get('email')?.touched" class="error">
          El correo es obligatorio y debe ser válido.
        </div>
      </div>
    </div>
    <button type="submit" [disabled]="form.invalid || loading" class="btn-auth btn-auth-primary">
      {{ loading ? 'Enviando...' : 'Enviar instrucciones' }}
    </button>
    <div class="auth-actions">
      <a routerLink="/auth/login" class="auth-action-link">Iniciar sesión</a>
      <a routerLink="/auth/register" class="auth-action-link">Registrarse</a>
    </div>
    <div *ngIf="loading" class="text-blue-700 text-center mt-2">
      <span class="spinner-border spinner-border-sm"></span> Enviando email...
    </div>
    <div *ngIf="errorMsg" class="text-danger text-center mt-2">{{ errorMsg }}</div>
    <div *ngIf="successMsg" class="text-success text-center mt-2">{{ successMsg }}</div>
  </form>
  <div *ngIf="sent" class="auth-form text-center">
    <h2 class="auth-title">¡Revisa tu correo!</h2>
    <p class="auth-subtitle">Te hemos enviado instrucciones para restablecer tu contraseña. Si no lo encuentras, revisa la bandeja de spam.</p>
    <a routerLink="/auth/login" class="auth-action-link text-sm">Volver a iniciar sesión</a>
  </div>
</section>
