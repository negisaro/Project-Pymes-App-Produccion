<section class="auth-bg">
  <form [formGroup]="form" (ngSubmit)="submit()" class="auth-form" *ngIf="!success">
    <h2 class="auth-title">Restablecer contraseña</h2>
    <p class="auth-subtitle">Ingresa tu nueva contraseña para recuperar el acceso a tu cuenta.</p>
    <div class="auth-fields">
      <div>
        <label for="password">Nueva contraseña</label>
        <input id="password" type="password" formControlName="password" autocomplete="new-password" class="input input-bordered rounded-xl" />
        <div *ngIf="form.get('password')?.invalid && form.get('password')?.touched" class="error">
          La contraseña es obligatoria.
        </div>
      </div>
    </div>
    <button type="submit" [disabled]="form.invalid || loading" class="btn-auth btn-auth-primary">
      {{ loading ? 'Guardando...' : 'Guardar contraseña' }}
    </button>
    <div class="auth-actions">
      <a routerLink="/auth/login" class="auth-action-link">Iniciar sesión</a>
      <a routerLink="/auth/register" class="auth-action-link">Registrarse</a>
    </div>
    <div *ngIf="loading" class="text-blue-700 text-center mt-2">
      <span class="spinner-border spinner-border-sm"></span> Guardando contraseña...
    </div>
    <div *ngIf="errorMsg" class="text-danger text-center mt-2">{{ errorMsg }}</div>
    <div *ngIf="successMsg" class="text-success text-center mt-2">{{ successMsg }}</div>
  </form>
  <div *ngIf="success" class="auth-form text-center">
    <h2 class="auth-title">¡Contraseña cambiada!</h2>
    <p class="auth-subtitle">Tu contraseña fue actualizada correctamente. Ya puedes iniciar sesión.</p>
    <a routerLink="/auth/login" class="auth-action-link text-sm">Ir a login</a>
  </div>
</section>
